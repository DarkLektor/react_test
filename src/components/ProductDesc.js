import React from 'react';
import { useDispatch, useSelector } from 'react-redux';
import {setWishMass} from '../redux/actions'
import {Link} from 'react-router-dom';
import CartForm from './CartForm';

function ProductDesc() {
    const dispatch = useDispatch();
    const wishMass = useSelector(state => state.wish);
    const locale = useSelector(state => state.locale);
    const currElem = useSelector(state => state.currentElement);


    function onSubmitWish(e, mass) {
        e.preventDefault();
        if (!wishMass.find((item) => {
                return item.id === mass.id &&
                    item.clothesCat === mass.clothesCat &&
                    item.price === mass.price
            })) {
            dispatch(setWishMass(wishMass.concat(mass)));
        }
    }
    

    return (
        currElem &&
        <div className="product_desc">
            <h1 className="prod_name">{currElem.name}</h1>
            <p className="prod_price">{currElem.price} $</p>
            <p className="prod_designer">
                <span>{locale === 'en' ? 'DESIGNER' : 'ДИЗАЙНЕР'}: </span>
                {currElem.designer}
            </p>
            <p className="prod_logo">
                {currElem.logo && <img src={currElem.logo} alt="product" />}
            </p>
            <CartForm obj={currElem}
                    noCart="true"
                    cartIndex={currElem.id} />
            <div className="sizes_wish">
                <Link to="/sizes-guide">{locale === 'en' ? 'Open sizes Guides' : 'Помощник по размерам'}</Link>
                <a href="#" onClick={(e) => onSubmitWish(e, currElem)}>
                    <svg viewBox="0 -28 512.001 512"><path d="m256 455.515625c-7.289062 0-14.316406-2.640625-19.792969-7.4375-20.683593-18.085937-40.625-35.082031-58.21875-50.074219l-.089843-.078125c-51.582032-43.957031-96.125-81.917969-127.117188-119.3125-34.644531-41.804687-50.78125-81.441406-50.78125-124.742187 0-42.070313 14.425781-80.882813 40.617188-109.292969 26.503906-28.746094 62.871093-44.578125 102.414062-44.578125 29.554688 0 56.621094 9.34375 80.445312 27.769531 12.023438 9.300781 22.921876 20.683594 32.523438 33.960938 9.605469-13.277344 20.5-24.660157 32.527344-33.960938 23.824218-18.425781 50.890625-27.769531 80.445312-27.769531 39.539063 0 75.910156 15.832031 102.414063 44.578125 26.191406 28.410156 40.613281 67.222656 40.613281 109.292969 0 43.300781-16.132812 82.9375-50.777344 124.738281-30.992187 37.398437-75.53125 75.355469-127.105468 119.308594-17.625 15.015625-37.597657 32.039062-58.328126 50.167969-5.472656 4.789062-12.503906 7.429687-19.789062 7.429687zm-112.96875-425.523437c-31.066406 0-59.605469 12.398437-80.367188 34.914062-21.070312 22.855469-32.675781 54.449219-32.675781 88.964844 0 36.417968 13.535157 68.988281 43.882813 105.605468 29.332031 35.394532 72.960937 72.574219 123.476562 115.625l.09375.078126c17.660156 15.050781 37.679688 32.113281 58.515625 50.332031 20.960938-18.253907 41.011719-35.34375 58.707031-50.417969 50.511719-43.050781 94.136719-80.222656 123.46875-115.617188 30.34375-36.617187 43.878907-69.1875 43.878907-105.605468 0-34.515625-11.605469-66.109375-32.675781-88.964844-20.757813-22.515625-49.300782-34.914062-80.363282-34.914062-22.757812 0-43.652344 7.234374-62.101562 21.5-16.441406 12.71875-27.894532 28.796874-34.609375 40.046874-3.453125 5.785157-9.53125 9.238282-16.261719 9.238282s-12.808594-3.453125-16.261719-9.238282c-6.710937-11.25-18.164062-27.328124-34.609375-40.046874-18.449218-14.265626-39.34375-21.5-62.097656-21.5zm0 0"/></svg>
                    {locale === 'en' ? 'Add to Wishlist' : 'Добавить в Избранное'}
                </a>
            </div>
            <div className="desc_ul">
                <p className="desc_title">
                    {locale === 'en' ? 'DESCRIPTION' : 'ОПИСАНИЕ'}
                </p>
                <p className="desc_info">
                    {currElem.desc}
                </p>
                <ul className="desc_list">
                    {currElem.desc_li.map((item,index) => {
                        return <li key={index}>
                            {item}
                        </li>
                    })}
                </ul>
            </div>
            <div className="sizes">
                <p>{locale === 'en' ? 'Side length: ' : 'Перед. длина: '}{currElem.side_length} cm</p>
                <p>{locale === 'en' ? 'Back length: ' : 'Задняя длина: '}{currElem.back_length} cm</p>
            </div>
            <div className="share_items">
                <a href="#">
                    <svg viewBox="0 0 24 24" ><path d="m15.997 3.985h2.191v-3.816c-.378-.052-1.678-.169-3.192-.169-3.159 0-5.323 1.987-5.323 5.639v3.361h-3.486v4.266h3.486v10.734h4.274v-10.733h3.345l.531-4.266h-3.877v-2.939c.001-1.233.333-2.077 2.051-2.077z"/></svg>
                </a>
                <a href="#">
                    <svg viewBox="0 0 24 24"><path d="m21.534 7.113c.976-.693 1.797-1.558 2.466-2.554v-.001c-.893.391-1.843.651-2.835.777 1.02-.609 1.799-1.566 2.165-2.719-.951.567-2.001.967-3.12 1.191-.903-.962-2.19-1.557-3.594-1.557-2.724 0-4.917 2.211-4.917 4.921 0 .39.033.765.114 1.122-4.09-.2-7.71-2.16-10.142-5.147-.424.737-.674 1.58-.674 2.487 0 1.704.877 3.214 2.186 4.089-.791-.015-1.566-.245-2.223-.606v.054c0 2.391 1.705 4.377 3.942 4.835-.401.11-.837.162-1.29.162-.315 0-.633-.018-.931-.084.637 1.948 2.447 3.381 4.597 3.428-1.674 1.309-3.8 2.098-6.101 2.098-.403 0-.79-.018-1.177-.067 2.18 1.405 4.762 2.208 7.548 2.208 8.683 0 14.342-7.244 13.986-14.637z"/></svg>
                </a>
                <a href="#">
                    <svg viewBox="0 0 24 24" width="512"><path d="m12.326 0c-6.579.001-10.076 4.216-10.076 8.812 0 2.131 1.191 4.79 3.098 5.633.544.245.472-.054.94-1.844.037-.149.018-.278-.102-.417-2.726-3.153-.532-9.635 5.751-9.635 9.093 0 7.394 12.582 1.582 12.582-1.498 0-2.614-1.176-2.261-2.631.428-1.733 1.266-3.596 1.266-4.845 0-3.148-4.69-2.681-4.69 1.49 0 1.289.456 2.159.456 2.159s-1.509 6.096-1.789 7.235c-.474 1.928.064 5.049.111 5.318.029.148.195.195.288.073.149-.195 1.973-2.797 2.484-4.678.186-.685.949-3.465.949-3.465.503.908 1.953 1.668 3.498 1.668 4.596 0 7.918-4.04 7.918-9.053-.016-4.806-4.129-8.402-9.423-8.402z"/></svg>
                </a>
                <a href="#">
                    <svg viewBox="0 0 24 24"><path d="m21.823 9h-2.187v2.177h-2.177v2.187h2.177v2.177h2.187v-2.177h2.177v-2.187h-2.177z"/><path d="m7.5 19.5c4.328 0 7.203-3.038 7.203-7.326 0-.491-.051-.87-.122-1.248h-7.08v2.578h4.257c-.174 1.095-1.289 3.233-4.257 3.233-2.557 0-4.645-2.118-4.645-4.737s2.087-4.738 4.645-4.738c1.463 0 2.435.624 2.988 1.156l2.036-1.954c-1.311-1.227-2.999-1.964-5.025-1.964-4.144 0-7.5 3.356-7.5 7.5s3.356 7.5 7.5 7.5z"/></svg>
                </a>
            </div>
            
        </div>
    )
}

export default ProductDesc;
